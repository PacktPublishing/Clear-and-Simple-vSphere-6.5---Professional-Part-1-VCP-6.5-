WEBVTT

00:01.080 --> 00:06.970
In this video I'll demonstrate how to configure network IO control on Envy's fair distributed switch.

00:07.560 --> 00:13.020
Ok so here you can see I'm at the networking screen of the vees faire web climb and I am going to click

00:13.080 --> 00:21.720
on my vse for distributed switch the VCP demo and here under VCP demo you can see the configure menu

00:22.860 --> 00:27.250
and on the left I've got a menu option for network resource pools.

00:27.330 --> 00:33.670
So this is where I can go to start setting up the network resource pools for my groups.

00:33.720 --> 00:40.260
However at the moment I see this message right here to create network resource pools configure a band

00:40.260 --> 00:43.610
with reservation for virtual machine system traffic.

00:43.620 --> 00:48.210
First let's take a look at system traffic.

00:48.210 --> 00:56.390
So this is a great screen to get a good understanding of what network IO control actually allows.

00:56.400 --> 00:59.940
Here you can see our total bandwidth capacity.

00:59.940 --> 01:05.610
Here is the amount of bandwidth that we have available and what we've done here.

01:05.960 --> 01:06.760
I should say.

01:06.780 --> 01:12.540
What we haven't done with what's been configured by default is there are shared values for all of these

01:12.540 --> 01:14.540
different types of system traffic.

01:14.880 --> 01:21.480
So for example virtual machine traffic has been granted a high number of shares or 100 hundred and then

01:21.540 --> 01:27.350
all of these other types of traffic like fault tolerance Wii motion ice Gazi etc. have been granted

01:27.360 --> 01:30.050
50 shares each.

01:30.060 --> 01:34.980
Now here's the thing you have to bear in mind when it comes to shares.

01:35.280 --> 01:40.040
Shares are only enforced during times of contention.

01:40.170 --> 01:47.100
So if there is a shortage of bandwidth virtual machines are going to get twice as much bandwidth as

01:47.250 --> 01:53.300
the motion or virtual machines are going to get twice as much bandwidth as traffic.

01:53.370 --> 02:00.360
That's what shares are their relative priority during times of contention.

02:00.390 --> 02:05.150
So we've already got a share of values established for all of these different types of system traffic

02:05.640 --> 02:07.790
and that's already baked in there by default.

02:09.140 --> 02:15.620
So let's go here to virtual machine traffic I'm going to hit the little edit button here and the other

02:15.620 --> 02:21.980
thing you can do with network IO control is you can actually establish a reservation for a certain type

02:21.980 --> 02:29.840
of traffic so let's say that I want to guarantee that there is always a minimum of one gig per second

02:30.880 --> 02:35.830
one gigabit per second available for virtual machine traffic.

02:35.930 --> 02:41.510
And so if I want to I can go ahead and configure a reservation for that sort of traffic.

02:41.630 --> 02:47.030
I can even configure limit for different types of traffic I'm not going to do that though I'm going

02:47.030 --> 02:50.010
to configure a reservation for virtual machine traffic.

02:50.030 --> 02:55.080
One of my system traffic types and this is a guarantee.

02:55.240 --> 03:00.730
Right so now I know for sure there is always going to be one gigabit per second available for virtual

03:00.770 --> 03:08.710
machine traffic and all of these other types of traffic can contend for the remaining available bandwidth.

03:09.350 --> 03:17.170
So Network IO control allows things like share's reservations and limits.

03:17.180 --> 03:24.380
So for example let's say that I wanted to set a certain limit for the amount of traffic that's going

03:24.380 --> 03:27.200
to be generated by these fair replication.

03:27.200 --> 03:32.990
Like maybe I know that you know I want to just set some sort of limitation for these for replication

03:33.510 --> 03:34.630
and I can do that.

03:34.790 --> 03:35.920
I could come over here.

03:35.960 --> 03:46.310
I can say OK my Wii's for replication traffic is never going to be more than let's say 250 megabits

03:46.310 --> 03:54.950
per second that will guarantee that that type of traffic does not exceed that amount of bandwidth on

03:54.950 --> 03:57.960
this particular vees for a distributed switch.

03:58.540 --> 03:59.160
OK.

03:59.330 --> 04:05.930
So now that I've got my reservation established for my system traffic type of virtual machine traffic

04:05.930 --> 04:10.760
let's go back to this screen here and I'm going to go ahead and create myself a network resource pool

04:12.470 --> 04:15.160
and I'm going to call it demo porker.

04:15.710 --> 04:19.640
And so what I'm going to do is I'm actually not going to give this a reservation.

04:19.640 --> 04:25.790
I'm just going to go ahead and hit OK here and now I've got this demo poor group established with no

04:25.790 --> 04:32.830
reservation and I haven't even associated a distributed port group with it or anything like that.

04:32.950 --> 04:41.270
And on my port group I can click on under configure properties go to Edit and under Edit I have the

04:41.270 --> 04:49.870
ability to associate this particular group with one of the network resource pools that I have created.

04:49.880 --> 04:54.710
So now my poor group is associated with a network resource pool.

04:55.010 --> 04:58.250
Let's go ahead and go back to avise for a distributed switch.

04:58.700 --> 05:00.680
And here is my demo portrait.

05:00.680 --> 05:06.270
The resource pool that I've created you can see the distributed port group that it's associated with

05:06.380 --> 05:10.340
and the virtual machines that are connected to that distributed group.

05:10.370 --> 05:12.820
And if I want to maybe now I want to go ahead and consider.

05:12.860 --> 05:17.260
Ok now I'm going to give this a certain level of bandwidth reservation.

05:17.480 --> 05:25.700
So I'm going to give it 500 megabits per second that's guaranteed to this particular demo portrait.

05:26.000 --> 05:33.000
So now we've got this configured Let's talk a little bit about why the options that we have are there.

05:33.500 --> 05:37.530
So you'll notice the configured reservation is two gigabits per second.

05:37.580 --> 05:45.620
This is because if we look at system traffic I have already reserved one gig per second for virtual

05:45.620 --> 05:46.400
machine traffic.

05:46.400 --> 05:48.890
I had to do that first.

05:48.890 --> 05:52.070
So I've reserved one gig per second for virtual machine traffic.

05:52.280 --> 06:00.380
And notice here I have two physical adapters so if I go back to network resource pools you'll notice

06:00.530 --> 06:03.840
the total configure reservation is two gigabits per second.

06:05.580 --> 06:12.330
Configured reservation is the bandwidth reservation for Reems system traffic aggregated from all physical

06:12.330 --> 06:13.300
adapters.

06:13.560 --> 06:19.890
So if I want to have more reservations available there I can add more physical adapters or I could go

06:19.890 --> 06:26.380
back to the virtual switch itself and change the reservation for VM traffic under System traffic.

06:26.610 --> 06:31.390
That's the reason why this two gigabit reservation is here.

06:31.770 --> 06:34.160
That's the reason for the maximum.

06:34.170 --> 06:42.120
So what I could do is I could go into a port group and I could potentially configure a maximum of 2

06:42.120 --> 06:43.260
gigs per second.

06:43.680 --> 06:50.370
Basically saying we're going to give one gig per second on each of those physical adapters to this particular

06:50.370 --> 06:52.260
network resource pool.

06:52.950 --> 07:00.420
So when I reserve a certain amount of bandwidth for virtual machine traffic now I can create a bunch

07:00.420 --> 07:06.660
of poor groups a bunch of different network resource pools and they can all kind of have their own little

07:06.660 --> 07:14.380
piece of this reservation that I've created here with my system traffic and so if I want to when I'm

07:14.380 --> 07:22.300
all done here just to kind of demo this process we can easily go through and delete a network resource

07:22.300 --> 07:23.870
pool that we've created.

07:24.190 --> 07:30.870
Of course in order to do that I have to go back to my poor group first added the properties of my port

07:30.940 --> 07:36.420
group and make sure that it's not a member of that network resource pool anymore.

07:36.430 --> 07:38.570
So let's do that first.

07:38.620 --> 07:43.130
That's why my first attempt at removing it failed.

07:43.220 --> 07:47.790
I've gotten that poor group out of that network resource pool.

07:47.830 --> 07:55.480
Now I should have the ability to go ahead and remove this network resource pool and that I can actually

07:55.480 --> 08:00.530
go ahead and revert and remove this reservation if I'd like to do so.

08:00.610 --> 08:06.120
I have to get rid of the network resource pool prior to destroying this reservation.

08:06.310 --> 08:08.500
So I'm going to go ahead and do that now.

08:09.070 --> 08:14.380
And now everything is basically back to defaults as soon as I remove this limit for Vee's for replication

08:14.380 --> 08:16.210
that ideomotor as well.

08:16.210 --> 08:18.160
So that's a great way to use that work IO control.

08:18.160 --> 08:22.930
Again I sort of think of it as kind of like a safety net.

08:23.020 --> 08:28.630
You know it's good to be able to kind of come in here and configure shares for these different types

08:28.630 --> 08:29.570
of traffic.

08:29.620 --> 08:34.720
You may even want to consider saying hey you know virtual machine traffic should have a different shared

08:34.720 --> 08:38.790
value or maybe eyes scuzzy should have a higher share value.

08:38.980 --> 08:43.540
It might be something you want to consider and just kind of massage these different types of system

08:43.540 --> 08:49.930
traffic share values a little bit but that's entirely up to you and the specifics of what's going on

08:49.930 --> 08:52.720
in your particular environment.

08:52.720 --> 08:53.750
One final note.

08:53.830 --> 09:00.040
Just remember for the exam network IO control is only supported on the VSE for distributed switch.

09:00.040 --> 09:03.250
This feature is not available on a VSE for standards which.
